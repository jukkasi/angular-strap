/**
 * angular-strap
 * @version v2.3.1 - 2015-09-04
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.select',['mgcrea.ngStrap.tooltip','mgcrea.ngStrap.helpers.parseOptions','mgcrea.ngStrap.helpers.utils']).provider('$select',function(){var e=this.defaults={animation:'am-fade',prefixClass:'select',prefixEvent:'$select',placement:'bottom-left',templateUrl:'select/select.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:'Choose among the following...',allText:'All',noneText:'None',maxLength:3,maxLengthHtml:'selected',iconCheckmark:'glyphicon glyphicon-ok'};this.$get=['$window','$document','$rootScope','$tooltip','$timeout',function(t,n,l,a,i){function o(t,n,l){var o={},c=angular.extend({},e,l);o=a(t,c);var u=o.$scope;u.$matches=[],u.$activeIndex=c.multiple?[]:-1,u.$isMultiple=c.multiple,u.$showAllNoneButtons=c.allNoneButtons&&c.multiple,u.$iconCheckmark=c.iconCheckmark,u.$allText=c.allText,u.$noneText=c.noneText,u.$activate=function(e){u.$$postDigest(function(){o.activate(e)})},u.$select=function(e,t){u.$$postDigest(function(){o.select(e)})},u.$isVisible=function(){return o.$isVisible()},u.$isActive=function(e){return o.$isActive(e)},u.$selectAll=function(){for(var e=0;e<u.$matches.length;e++)u.$isActive(e)||u.$select(e)},u.$selectNone=function(){for(var e=0;e<u.$matches.length;e++)u.$isActive(e)&&u.$select(e)},o.update=function(e){u.$matches=e,o.$updateActiveIndex()},o.activate=function(e){return c.multiple?(o.$isActive(e)?u.$activeIndex.splice(u.$activeIndex.indexOf(e),1):u.$activeIndex.push(e),c.sort&&u.$activeIndex.sort(function(e,t){return e-t})):u.$activeIndex=e,u.$activeIndex},o.select=function(e){var t=u.$matches[e].value;u.$apply(function(){o.activate(e),c.multiple?n.$setViewValue(u.$activeIndex.map(function(e){return angular.isUndefined(u.$matches[e])?null:u.$matches[e].value})):(n.$setViewValue(t),o.hide())}),u.$emit(c.prefixEvent+'.select',t,e,o)},o.$updateActiveIndex=function(){n.$modelValue&&u.$matches.length?u.$activeIndex=c.multiple&&angular.isArray(n.$modelValue)?n.$modelValue.map(function(e){return o.$getIndex(e)}):o.$getIndex(n.$modelValue):u.$activeIndex>=u.$matches.length?u.$activeIndex=c.multiple?[]:0:n.$modelValue||c.multiple||(u.$activeIndex=-1)},o.$isVisible=function(){return c.minLength&&n?u.$matches.length&&n.$viewValue.length>=c.minLength:u.$matches.length},o.$isActive=function(e){return c.multiple?-1!==u.$activeIndex.indexOf(e):u.$activeIndex===e},o.$getIndex=function(e){var t=u.$matches.length,n=t;if(t){for(n=t;n--&&u.$matches[n].value!==e;);if(!(0>n))return n}},o.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),r){var t=angular.element(e.target);t.triggerHandler('click')}},o.$onKeyDown=function(e){return/(9|13|38|40)/.test(e.keyCode)?(e.preventDefault(),e.stopPropagation(),c.multiple&&9===e.keyCode?o.hide():c.multiple||13!==e.keyCode&&9!==e.keyCode?void(c.multiple||(38===e.keyCode&&u.$activeIndex>0?u.$activeIndex--:38===e.keyCode&&u.$activeIndex<0?u.$activeIndex=u.$matches.length-1:40===e.keyCode&&u.$activeIndex<u.$matches.length-1?u.$activeIndex++:angular.isUndefined(u.$activeIndex)&&(u.$activeIndex=0),u.$digest())):o.select(u.$activeIndex)):void 0};var s=o.show;o.show=function(){s(),c.multiple&&o.$element.addClass('select-multiple'),i(function(){o.$element.on(r?'touchstart':'mousedown',o.$onMouseDown),c.keyboard&&t.on('keydown',o.$onKeyDown)},0,!1)};var $=o.hide;return o.hide=function(){c.multiple||n.$modelValue||(u.$activeIndex=-1),o.$element.off(r?'touchstart':'mousedown',o.$onMouseDown),c.keyboard&&t.off('keydown',o.$onKeyDown),$(!0)},o}var c=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),r='createTouch'in t.document&&c;return o.defaults=e,o}]}).directive('bsSelect',['$window','$parse','$q','$select','$parseOptions','$utils',function(e,t,n,l,a,i){var o=l.defaults;return{restrict:'EAC',require:'ngModel',link:function(e,t,n,c){i.isIE()&&t[0].addEventListener('blur',i.selectScrollFix);var r={scope:e,placeholder:o.placeholder};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','keyboard','html','animation','placeholder','allNoneButtons','maxLength','maxLengthHtml','allText','noneText','iconCheckmark','autoClose','id','sort','caretHtml','prefixClass','prefixEvent'],function(e){angular.isDefined(n[e])&&(r[e]=n[e])});var u=/^(false|0|)$/i;angular.forEach(['html','container','allNoneButtons','sort'],function(e){angular.isDefined(n[e])&&u.test(n[e])&&(r[e]=!1)});var s=t.attr('data-multiple');if(angular.isDefined(s)&&(r.multiple=u.test(s)?!1:s),'select'===t[0].nodeName.toLowerCase()){var $=t;$.css('display','none'),t=angular.element('<button type="button" class="btn btn-default"></button>'),$.after(t)}var d=a(n.bsOptions),m=l(t,c,r),p=d.$match[7].replace(/\|.+/,'').trim();e.$watchCollection(p,function(t,n){d.valuesFn(e,c).then(function(e){m.update(e),c.$render()})}),e.$watch(n.ngModel,function(e,t){m.$updateActiveIndex(),c.$render()},!0),c.$render=function(){var e,n;r.multiple&&angular.isArray(c.$modelValue)?(e=c.$modelValue.map(function(e){return n=m.$getIndex(e),angular.isDefined(n)?m.$scope.$matches[n].label:!1}).filter(angular.isDefined),e=e.length>(r.maxLength||o.maxLength)?e.length+' '+(r.maxLengthHtml||o.maxLengthHtml):e.join(', ')):(n=m.$getIndex(c.$modelValue),e=angular.isDefined(n)?m.$scope.$matches[n].label:!1),t.html((e?e:r.placeholder)+(r.caretHtml?r.caretHtml:o.caretHtml))},r.multiple&&(c.$isEmpty=function(e){return!e||0===e.length}),e.$on('$destroy',function(){m&&m.destroy(),r=null,m=null})}}}]);
//# sourceMappingURL=../modules/select.min.js.map